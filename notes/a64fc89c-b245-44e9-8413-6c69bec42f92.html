<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
  
  <title>Applicationlayer - my_note</title>
  

  <link
    rel="shortcut icon"
    href="https://notes.tczhong.com/favicon.ico"
    type="image/x-icon"
  />
  <link
    rel="stylesheet"
    href="https://notes.tczhong.com/assets/css/just-the-docs-default.css"
  />
  <script
    type="text/javascript"
    src="https://notes.tczhong.com/assets/js/just-the-docs.js"
  ></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/themes/prism.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
    integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X"
    crossorigin="anonymous"
  />
  <script
    type="text/javascript"
    src="https://notes.tczhong.com/assets/js/vendor/lunr.min.js"
  ></script>
  
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   
  
<meta name="description" content="Personal knowledge space">
<meta name="author" content="">

<link rel="canonical" href="https://notes.tczhong.com/notes/a64fc89c-b245-44e9-8413-6c69bec42f92.html">

<meta property="og:type" content="article">
<meta property="og:url" content="https://notes.tczhong.com/notes/a64fc89c-b245-44e9-8413-6c69bec42f92.html">
<meta property="og:description" content="Personal knowledge space">
<meta property="og:image" content="https://notes.tczhong.comundefined">

<meta name="twitter:card" content="summary">

<meta name="twitter:url" content="https://notes.tczhong.com/notes/a64fc89c-b245-44e9-8413-6c69bec42f92.html">
<meta name="twitter:description" content="Personal knowledge space">
<meta name="twitter:image" content="https://notes.tczhong.comundefined">


  <meta property="og:title" content="Applicationlayer - my_note" />
  <meta name="twitter:title" content="Applicationlayer - my_note" />
  
</head>


<body>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <symbol id="svg-link" viewBox="0 0 24 24">
        <title>Link</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
          <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
      </symbol>
      <symbol id="svg-search" viewBox="0 0 24 24">
        <title>Search</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
          <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
      </symbol>
      <symbol id="svg-menu" viewBox="0 0 24 24">
        <title>Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
          <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </symbol>
      <symbol id="svg-arrow-right" viewBox="0 0 24 24">
        <title>Expand</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </symbol>
      <symbol id="svg-doc" viewBox="0 0 24 24">
        <title>Document</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
          <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
        </svg>
      </symbol>
    </svg>

    <div class="side-bar">
      <div class="site-header">
        <a href="https://notes.tczhong.com" class="site-title lh-tight">
  my_note

 </a>
        <a href="#" id="menu-button" class="site-button">
          <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
        </a>
      </div>

      <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      </nav>
      <footer class="site-footer">
        🌱 with 💕 using <a href="https://www.dendron.so/"> Dendron 🌲 </a>
      </footer>
    </div>
    <div class="main" id="top">
        <div id="main-header" class="main-header">
          
            <div class="search">
              <div class="search-input-wrap">
                <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search my_note" aria-label="Search my_note" autocomplete="off">
                <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
              </div>
              <div id="search-results" class="search-results"></div>
            </div>
          
          
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      
        
          <nav aria-label="Breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="https://notes.tczhong.com">Development</a></li><li class="breadcrumb-nav-list-item"><a href="https://notes.tczhong.com/notes/92917ea3-452e-48dc-875e-5cd0002041db.html">Network</a></li><li class="breadcrumb-nav-list-item">Applicationlayer</li></ol>
          </nav>
        
      
      <div id="main-content" class="main-content" role="main">

        
        
        <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
        

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

        

        <script>
          $(function () {
            $('[data-toggle="popover"]').popover({html: true})
          })
        </script>

        

<div id="main" role="main">

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Applicationlayer">
    
    <meta itemprop="datePublished" content="2021-03-14T19:31:28+00:00">
    <meta itemprop="dateModified" content="2021-03-25T16:43:52+00:00">

    <div class="page__inner-wrap">

      

      <section class="page__content" itemprop="text">

        

        <h1 id="applicationlayer"><a aria-hidden="true" class="anchor-heading" href="#applicationlayer"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Applicationlayer</h1>
<h1 id="application-layer"><a aria-hidden="true" class="anchor-heading" href="#application-layer"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Application layer</h1>
<p>http/smtp/dns/voip</p>
<p><img src="/assets/images/2021-03-25-16-43-51.png"></p>
<h2 id="goals"><a aria-hidden="true" class="anchor-heading" href="#goals"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Goals</h2>
<ul>
<li>relaiable data transfer</li>
<li>high throughput</li>
<li>timing guarantees</li>
</ul>
<h2 id="http"><a aria-hidden="true" class="anchor-heading" href="#http"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>http</h2>
<p>访问一个网址发生了什么</p>
<ol>
<li>
<p>The HTTP client process initiates a TCP connection to the server <a href="http://www.someSchool.edu">www.someSchool.edu</a> on port number 80, which is the default port number for HTTP. Associated with the TCP connection, there will be a socket at the client and a socket at the server. 建立tcp</p>
</li>
<li>
<p>The HTTP client sends an HTTP request message to the server via its socket. The request message includes the path name /someDepartment/home.index. (We will discuss HTTP messages in some detail below.) 发送请求</p>
</li>
<li>
<p>The HTTP server process receives the request message via its socket, retrieves the object /someDepartment/home.index from its storage (RAM or disk), encapsulates the object in an HTTP response message, and sends the response message to the client via its socket. 返回请求</p>
</li>
<li>
<p>The HTTP server process tells TCP to close the TCP connection. (But TCP doesn’t actually terminate the connection until it knows for sure that the client has received the response message intact.) 关闭tcp</p>
</li>
<li>
<p>The HTTP client receives the response message. The TCP connection terminates. The message indicates that the encapsulated object is an HTML file. The client extracts the file from the response message, examines the HTML file, and finds references to the 10 JPEG objects. 关闭</p>
</li>
<li>
<p>The first four steps are then repeated for each of the referenced JPEG objects.</p>
</li>
</ol>
<p><img src="/assets/images/2021-03-14-19-59-53.png"></p>
<h3 id="message-format"><a aria-hidden="true" class="anchor-heading" href="#message-format"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>message format</h3>
<ul>
<li>message format:
<ul>
<li>hypertext transfer protocol</li>
<li>web's appliation layer protocol</li>
<li>client/server model</li>
<li>2 type: requests from client to server and responses</li>
<li>requests and response</li>
<li>startline:request line (Method SP Request-URI SP HTTP-Version CRLF) | status line
<ul>
<li>GET /index HTTP/1.1</li>
<li>HTTP/1.1 200 OK</li>
</ul>
</li>
<li>zero or more headers: provide metadata about request or response:datas/times, application info,caching control,<strong>host</strong> must on requests</li>
<li>an empty line</li>
<li>message body</li>
<li>request methods:</li>
<li>GET: retrieve an object: conditional GET/ Partial GET</li>
<li>HEAD: retrieve metadata about object</li>
<li>OPTIONS: request info about the capabilities</li>
<li>POST: upload data to server</li>
<li>status code</li>
<li>1XX informational</li>
<li>2XX success</li>
<li>3XX redirection</li>
<li>4XX client error</li>
<li>5XX server error</li>
<li>each request only retrieve one object</li>
</ul>
</li>
</ul>
<h3 id="persistent-http"><a aria-hidden="true" class="anchor-heading" href="#persistent-http"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>persistent http</h3>
<ul>
<li>persistent http
<ul>
<li>reuse existing transport connection,subsequent http message between same client/server sent over open connection</li>
<li>pipelining at application protocol level</li>
<li>without pipeline: one RTT for each referenced object <strong>RTT+transmission time(one object)</strong></li>
<li>use pipeline: one RTT for all referenced objects</li>
<li>reduce transport-layer connection cost</li>
<li>reduce latency by avoid mulitple TCP slow-starts</li>
<li>avoid bandwidth wastage and reduce all congestion</li>
</ul>
</li>
</ul>
<h3 id="cookie"><a aria-hidden="true" class="anchor-heading" href="#cookie"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>cookie</h3>
<p><img src="/assets/images/2021-03-14-20-03-12.png"></p>
<h2 id="dns"><a aria-hidden="true" class="anchor-heading" href="#dns"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>DNS</h2>
<ul>
<li>mission: A directory service for the Internet</li>
<li>domain namespace: hierarchical structure
<ul>
<li>type of dns ns: root/top-level domain/ authoritative/ local</li>
</ul>
</li>
</ul>
<p><img src="/assets/images/2021-03-14-20-07-56.png"></p>
<ul>
<li>root server's job:
<ul>
<li>what <a href="http://www.library.cmu.edu">www.library.cmu.edu</a>: go to ns for .edu</li>
<li>know top-level domain 2.3M </li>
</ul>
</li>
<li>tld ns' job: ask cmu.edu ns</li>
<li>authoritative ns: provide authoritative hostname to ip </li>
<li>local ns: resolver: act as proxy</li>
</ul>
<ul>
<li>
<p>Load distribution across replicated servers</p>
<ul>
<li>A name can map to multiple hosts </li>
<li>thus multiple addresses</li>
<li>DNS server returns all addresses </li>
<li>but rotates ordering</li>
</ul>
</li>
<li>
<p>Simple query and reply mechanism, same message format, Resource Record</p>
</li>
<li>
<p>Runs over UDP </p>
</li>
<li>
<ul>
<li>DNS did not need tcp retransmission when lost,try another ns</li>
</ul>
<ul>
<li>tcp take long set-up time, query and request time need to be short</li>
</ul>
</li>
<li>
<p>data used as Resource Record (RR) in query and reply messages:</p>
<ul>
<li>name(owner name), value, type, class (IN,internet), ttl</li>
<li>A = Address </li>
<li>ns = nameserver</li>
<li>cname = canonical name</li>
<li>mx = mail exchange</li>
</ul>
</li>
<li>
<p>caching: once ns learns mapping, it caches mapping, timeout after ttl</p>
</li>
</ul>
<h3 id="tool"><a aria-hidden="true" class="anchor-heading" href="#tool"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>tool</h3>
<ul>
<li>nslookup </li>
<li>dig</li>
<li>whois</li>
</ul>
<hr>
<h2 id="backlinks"><a aria-hidden="true" class="anchor-heading" href="#backlinks"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Backlinks</h2>
<ul>
<li><a href="https://notes.tczhong.com/notes/92917ea3-452e-48dc-875e-5cd0002041db.html">Network (my_note)</a></li>
</ul><span id="navId" data="a64fc89c-b245-44e9-8413-6c69bec42f92"></span>

                
      </section>

      
    </div>

    
  </article>

  
  
</div>


        
          <hr>
          <footer>
            
            

            
                
              </div>
          </footer>
        
    </div>
</div>


  

  <div class="search-overlay"></div>

</div>
</body>
</html>

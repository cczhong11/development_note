<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
  
  <title>Process - my_note</title>
  

  <link
    rel="shortcut icon"
    href="https://notes.tczhong.com/favicon.ico"
    type="image/x-icon"
  />
  <link
    rel="stylesheet"
    href="https://notes.tczhong.com/assets/css/just-the-docs-default.css"
  />
  <script
    type="text/javascript"
    src="https://notes.tczhong.com/assets/js/just-the-docs.js"
  ></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/themes/prism.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
    integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X"
    crossorigin="anonymous"
  />
  <script
    type="text/javascript"
    src="https://notes.tczhong.com/assets/js/vendor/lunr.min.js"
  ></script>
  
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   
  
<meta name="description" content="Personal knowledge space">
<meta name="author" content="">

<link rel="canonical" href="https://notes.tczhong.com/notes/68e49ff0-58d9-43fa-a47f-a0d50b88095d.html">

<meta property="og:type" content="article">
<meta property="og:url" content="https://notes.tczhong.com/notes/68e49ff0-58d9-43fa-a47f-a0d50b88095d.html">
<meta property="og:description" content="Personal knowledge space">
<meta property="og:image" content="https://notes.tczhong.comundefined">

<meta name="twitter:card" content="summary">

<meta name="twitter:url" content="https://notes.tczhong.com/notes/68e49ff0-58d9-43fa-a47f-a0d50b88095d.html">
<meta name="twitter:description" content="Personal knowledge space">
<meta name="twitter:image" content="https://notes.tczhong.comundefined">


  <meta property="og:title" content="Process - my_note" />
  <meta name="twitter:title" content="Process - my_note" />
  
</head>


<body>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <symbol id="svg-link" viewBox="0 0 24 24">
        <title>Link</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
          <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
      </symbol>
      <symbol id="svg-search" viewBox="0 0 24 24">
        <title>Search</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
          <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
      </symbol>
      <symbol id="svg-menu" viewBox="0 0 24 24">
        <title>Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
          <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </symbol>
      <symbol id="svg-arrow-right" viewBox="0 0 24 24">
        <title>Expand</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </symbol>
      <symbol id="svg-doc" viewBox="0 0 24 24">
        <title>Document</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
          <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
        </svg>
      </symbol>
    </svg>

    <div class="side-bar">
      <div class="site-header">
        <a href="https://notes.tczhong.com" class="site-title lh-tight">
  my_note

 </a>
        <a href="#" id="menu-button" class="site-button">
          <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
        </a>
      </div>

      <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      </nav>
      <footer class="site-footer">
        ğŸŒ± with ğŸ’• using <a href="https://www.dendron.so/"> Dendron ğŸŒ² </a>
      </footer>
    </div>
    <div class="main" id="top">
        <div id="main-header" class="main-header">
          
            <div class="search">
              <div class="search-input-wrap">
                <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search my_note" aria-label="Search my_note" autocomplete="off">
                <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
              </div>
              <div id="search-results" class="search-results"></div>
            </div>
          
          
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      
        
          <nav aria-label="Breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="https://notes.tczhong.com">Development</a></li><li class="breadcrumb-nav-list-item"><a href="https://notes.tczhong.com/notes/6cea4852-6e7c-4140-b476-85c07b48a642.html">Computer</a></li><li class="breadcrumb-nav-list-item"><a href="https://notes.tczhong.com/notes/5d880b52-6a1f-48fd-b059-7b2e32c601c2.html">Multitask</a></li><li class="breadcrumb-nav-list-item">Process</li></ol>
          </nav>
        
      
      <div id="main-content" class="main-content" role="main">

        
        
        <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
        

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

        

        <script>
          $(function () {
            $('[data-toggle="popover"]').popover({html: true})
          })
        </script>

        

<div id="main" role="main">

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Process">
    
    <meta itemprop="datePublished" content="2021-04-05T22:40:31+00:00">
    <meta itemprop="dateModified" content="2021-05-11T20:16:24+00:00">

    <div class="page__inner-wrap">

      

      <section class="page__content" itemprop="text">

        

        <h1 id="process"><a aria-hidden="true" class="anchor-heading" href="#process"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Process</h1>
<h1 id="process-1"><a aria-hidden="true" class="anchor-heading" href="#process-1"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>process</h1>
<p><img src="/assets/images/2021-05-11-20-16-21.png"></p>
<p>æ˜¯æ‰§è¡Œä¸­ç¨‹åºçš„å®ä¾‹ï¼Œç³»ç»Ÿä¸­çš„æ¯ä¸€ä¸ªç¨‹åºéƒ½è¿è¡Œåœ¨æŸä¸ªè¿›ç¨‹çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œä¸Šä¸‹æ–‡æ˜¯ç”±ç¨‹åºæ­£ç¡®è¿è¡Œæ‰€éœ€çŠ¶æ€ç»„æˆçš„ï¼Œè¿™ä¸ªçŠ¶æ€åŒ…æ‹¬å­˜æ”¾å†…å­˜ä¸­ç¨‹åºçš„ä»£ç å’Œæ•°æ®ï¼Œå®ƒçš„æ ˆï¼Œé€šç”¨ç›®çš„å¯„å­˜å™¨çš„å†…å®¹ï¼Œç¨‹åºè®¡æ•°å™¨ï¼Œç¯å¢ƒå˜é‡ï¼Œä»¥åŠæ‰“å¼€æ–‡ä»¶æè¿°ç¬¦çš„é›†åˆã€‚æ¯æ¬¡ç”¨æˆ·é€šè¿‡shellè¾“å…¥ä¸€ä¸ªå¯æ‰§è¡Œç›®æ ‡æ–‡ä»¶ï¼Œshellå°±ä¼šåˆ›å»ºæ–°çš„è¿›ç¨‹ã€‚</p>
<p>The classic definition of a process is an instance of a program in execution. Each program in the system runs in the context of some process.The context consists of the state that the program needs to run correctly. This state includes the program's code and data stored in memory, its stack, the contents of its general-purpose registers, its program counter, environment variables, and the set of open file descriptors.</p>
<p>è¿›ç¨‹æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é€»è¾‘æ§åˆ¶æµï¼Œè½®æµä½¿ç”¨å¤„ç†å™¨çš„ï¼Œæ¯ä¸ªè¿›ç¨‹æ‰§è¡Œæµçš„ä¸€éƒ¨åˆ†ï¼Œç„¶åè¢«å¼ºå ï¼ˆpreemptedï¼‰,æš‚æ—¶è¢«æŒ‚èµ·ã€‚time slicing, concurrency</p>
<p>æ¯ä¸ªprocessæœ‰ç§æœ‰çš„åœ°å€ç©ºé—´ï¼Œä»£ç æ®µéƒ½ä»0x400000å¼€å§‹ã€‚</p>
<p>å†…æ ¸è°ƒåº¦ä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œè¿è¡Œä¹‹åï¼Œå®ƒå°±ä¼šæŠ¢å å½“å‰è¿›ç¨‹ï¼Œå¹¶ä½¿ç”¨ä¸€ç§ä¸Šä¸‹æ–‡åˆ‡æ¢æœºåˆ¶æ¥å°†æ§åˆ¶è½¬ç§»åˆ°æ–°è¿›ç¨‹ä¸­ã€‚</p>
<p>è¿›ç¨‹æ§åˆ¶ï¼šè·å–è¿›ç¨‹idã€‚è¿›ç¨‹æœ‰ä¸‰ç§çŠ¶æ€ï¼šè¿è¡Œï¼Œåœæ­¢(suspended) æ”¶åˆ°SIGSTOP, SIGTSTP,SIGTTIN or SIGTTOUï¼Œç›´åˆ°æ”¶åˆ°SIGCONTç»§ç»­ã€‚ç»ˆæ­¢ï¼Œæ”¶åˆ°ç»ˆæ­¢è¿›ç¨‹çš„ä¿¡å·ï¼Œä»ä¸»ç¨‹åºè¿”å›ï¼Œè°ƒç”¨exitå‡½æ•°ã€‚
è¿›ç¨‹åˆ›å»ºç”¨forkï¼Œ å½“ä¸€ä¸ªè¿›ç¨‹ç”±äºæŸç§åŸå› ç»ˆæ­¢æ—¶ï¼Œå†…æ ¸å¹¶ä¸æ˜¯ç«‹åˆ»æŠŠå®ƒä»ç³»ç»Ÿä¸­æ¸…é™¤ï¼Œç›¸åè¿›ç¨‹å°†ä¼šï¼Œè¢«ä¿æŒåœ¨ä¸€ç§å·²ç»ç»ˆæ­¢çš„çŠ¶æ€ï¼Œç›´åˆ°è¢«çˆ¶è¿›ç¨‹å›æ”¶ã€‚waitpid ç­‰å¾…å­è¿›ç¨‹ç»ˆæ­¢ã€‚è¿›ç¨‹ä¼‘çœ å°±æ˜¯sleepã€‚</p>
<p>åŠ è½½å¹¶è¿è¡Œç¨‹åºä½¿ç”¨execveå‡½æ•°ã€‚execveè°ƒç”¨ä¸€æ¬¡ä»ä¸è¿”å›ã€‚åŠ è½½filenameä¹‹åï¼Œè°ƒç”¨å¯åŠ¨ä»£ç ï¼Œè®¾ç½®æ ˆï¼Œå°†æ§åˆ¶ä¼ é€’ç»™æ–°ç¨‹åºçš„mainã€‚</p>
<p>the typical difference is that <strong>threads</strong> (of the same process) run in a <strong>shared memory space</strong>, while processes run in separate memory spaces. threadæœ‰è‡ªå·±çš„tidï¼Œæ ˆï¼Œspï¼Œpcï¼Œgeneral register and flag, <strong>the code, data and heap areas are shared</strong></p>
<h2 id="process-control"><a aria-hidden="true" class="anchor-heading" href="#process-control"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>process control</h2>
<ul>
<li>run </li>
<li>suspend: A process stops as a result of receiving a SIGSTOP, SIGTSTP, SIGTI1N, or SIGTTOU signal, and it remains stopped until it receives a SIGCONT signal, at which point it becomes running again. </li>
<li>terminateï¼š exit</li>
</ul>
<p></p><p></p><div class="portal-container">
  <div class="portal-head">
  <div class="portal-backlink">
  <div class="portal-title">From <span class="portal-text-title">Fork</span></div>
  <a href="https://notes.tczhong.com/notes/27148b7c-1a4b-4f57-8980-48c50e158b39.html" class="portal-arrow">Go to text <span class="right-arrow">â†’</span></a>
  </div>
  </div>
  <div id="portal-parent-anchor" class="portal-parent" markdown="1">
  <div class="portal-parent-fader-top"></div>
  <div class="portal-parent-fader-bottom"></div>
  <p>system call</p>
<p>forkå‡½æ•°è°ƒç”¨ä¸€æ¬¡ï¼Œè¿”å›ä¸¤æ¬¡ï¼Œå¹¶å‘æ‰§è¡Œï¼Œ<strong>ç›¸åŒä½†æ˜¯ç‹¬ç«‹çš„åœ°å€ç©ºé—´</strong>ã€‚ç›¸åŒä»£ç å’Œæ•°æ®æ®µã€å †ã€å…±äº«åº“ä»¥åŠç”¨æˆ·æ ˆï¼Œå…±äº«æ–‡ä»¶ï¼Œæœ€å¤§åŒºåˆ«æ˜¯çˆ¶å’Œå­æœ‰ä¸åŒçš„pidã€‚</p>
<p>å¯¹æ‰€æœ‰fork æ‹“æ‰‘æ’åºï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªè¾“å‡ºé¡ºåºã€‚</p>
<p>forkä¸ºå½“å‰è¿›ç¨‹è°ƒç”¨ï¼Œæ˜¯å†…æ ¸ï¼Œä¸ºæ–°è¿›ç¨‹åˆ›å»ºå„ç§æ•°æ®ç»“æ„ï¼Œå¹¶åˆ†é…ç»™ä»–ä¸€ä¸ªå”¯ä¸€çš„pid.ä¸ºäº†ç»™è¿™ä¸ªæ–°è¿›ç¨‹åˆ›å»ºè™šæ‹Ÿå†…å­˜ï¼Œå®ƒåˆ›å»ºå½“å‰è¿›ç¨‹çš„mm_struct, åŒºåŸŸç»“æ„å’Œé¡µè¡¨çš„åŸæ ·å‰¯æœ¬ï¼Œä»–å°†ä¸¤ä¸ªè¿›ç¨‹ä¸­çš„æ¯ä¸ªé¡µé¢éƒ½æ ‡è®°ä¸ºåªè¯»ï¼Œå¹¶å°†ä¸¤ä¸ªè¿›ç¨‹ä¸­æ¯ä¸ªåŒºåŸŸç»“æ„éƒ½æ ‡è®°ä¸ºç§æœ‰çš„å†™æ—¶å¤åˆ¶ copy on writeã€‚</p>
</div>    
  </div><p></p><p></p>
<h2 id="context-switch"><a aria-hidden="true" class="anchor-heading" href="#context-switch"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>context switch</h2>
<p><img src="/assets/images/2021-04-25-23-04-15.png"></p>
<p>registersæ˜¯å”¯ä¸€è¢«æ‰€æœ‰è¿‡ç¨‹å…±äº«çš„èµ„æºï¼Œå½“è°ƒç”¨æ—¶ï¼ŒæŠŠæ‰€æœ‰åŸå§‹å€¼å‹å…¥æ ˆä¸­ï¼Œæ”¹å˜å¯„å­˜å™¨çš„å€¼ï¼Œåœ¨è¿”å›ä¹‹å‰ä»æ ˆä¸­å¼¹å‡ºæ—§å€¼ã€‚</p>
<p>It consists of the values of objects such as the general-purpose registers, the floating-point registers, the program counter, user's stack, status registers, kernel's stack, and various kernel data structures such as a page table that characterizes the address space, a process table that contains information about the current process, and a file table that contains information about the files that the process has opened.</p>
<p>Context Switch æµç¨‹ï¼šä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œç¬¬ä¸€ï¼Œä¿å­˜å½“å‰è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ï¼Œç¬¬äºŒï¼Œæ¢å¤æŸä¸ªå…ˆå‰è¢«æŠ¢å çš„è¿›ç¨‹ï¼Œè¢«ä¿å­˜çš„ä¸Šä¸‹æ–‡ï¼Œç¬¬ä¸‰ï¼Œå°†æ§åˆ¶ä¼ é€’ç»™è¿™ä¸ªæ–°æ¢å¤çš„è¿›ç¨‹ã€‚
(1) saves the context of the current process, (2) restores the saved context of some previously preempted process, and (3) passes control to this newly restored process.</p>
<p>The context is the state that the kernel needs to restart a preempted process. It consists of the values of objects such as the <strong>general-purpose registers, the floating-point registers, the program counter, user's stack, status registers, kernel's stack, and various kernel data structures such as a page table that characterizes the address space, a process table that contains information about the current process, and a file table that contains information about the files that the process has opened</strong>.</p>
<h2 id="zombie-process"><a aria-hidden="true" class="anchor-heading" href="#zombie-process"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>zombie process</h2>
<p>Zombie process
what is zombie process? When does it become zombie process?</p>
<p>å½“è¿›ç¨‹ç”±äºæŸç§åŸå› ç»ˆæ­¢æ—¶ï¼Œå†…æ ¸ä¸ä¼šç«‹å³æ¸…é™¤ï¼Œè€Œæ˜¯ä¿æŒåœ¨ä¸€ç§å·²ç»ç»ˆæ­¢çš„çŠ¶æ€ç›´è‡³è¢«çˆ¶è¿›ç¨‹å›æ”¶ï¼Œä¸€ä¸ªç»ˆæ­¢æœªè¢«å›æ”¶çš„å«zombieã€‚ç”¨waitpidå‡½æ•°ç­‰å¾…å­è¿›ç¨‹ç»ˆæ­¢æˆ–åœæ­¢ã€‚</p>
<p>On Unix and Unix-like computer operating systems, a zombie process or defunct process is a process that has completed execution (via the exit system call) but <strong>still has an entry in the process table</strong>: it is a process in the "Terminated state". This occurs for child processes, where the entry is still needed to allow the parent process to read its child's exit status: once the exit status is read via the wait system call, the zombie's entry is removed from the process table and it is said to be "reaped".</p>
<hr>
<h2 id="children"><a aria-hidden="true" class="anchor-heading" href="#children"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Children</h2>
<ol>
<li><a href="https://notes.tczhong.com/notes/26c24828-9284-461c-8416-4b442d49e85e.html">Signal</a></li>
</ol><span id="navId" data="68e49ff0-58d9-43fa-a47f-a0d50b88095d"></span>

                
      </section>

      
    </div>

    
  </article>

  
  
</div>


        
          <hr>
          <footer>
            
            

            
                
              </div>
          </footer>
        
    </div>
</div>


  

  <div class="search-overlay"></div>

</div>
</body>
</html>

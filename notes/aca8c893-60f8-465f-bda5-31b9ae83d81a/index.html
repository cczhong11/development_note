<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><title>Container</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal knowledge space"/><meta property="og:title" content="Container"/><meta property="og:description" content="Personal knowledge space"/><meta property="og:url" content="https://notes.tczhong.com/notes/aca8c893-60f8-465f-bda5-31b9ae83d81a/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="4/13/2021"/><meta property="article:modified_time" content="5/12/2021"/><link rel="canonical" href="https://notes.tczhong.com/notes/aca8c893-60f8-465f-bda5-31b9ae83d81a/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/_next/static/css/35c8e98bba5d4075.css" as="style"/><link rel="stylesheet" href="/_next/static/css/35c8e98bba5d4075.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-378e68e29c265886.js" defer=""></script><script src="/_next/static/chunks/framework-dc33c0b5493501f0.js" defer=""></script><script src="/_next/static/chunks/main-a7fe8c0ea9a0f989.js" defer=""></script><script src="/_next/static/chunks/pages/_app-fdb9297d37c44607.js" defer=""></script><script src="/_next/static/chunks/155-4c900bf5c5278e05.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-ebe33fbe56ae1215.js" defer=""></script><script src="/_next/static/FWMOU7HnIEvYhYu7_V-Vm/_buildManifest.js" defer=""></script><script src="/_next/static/FWMOU7HnIEvYhYu7_V-Vm/_ssgManifest.js" defer=""></script><script src="/_next/static/FWMOU7HnIEvYhYu7_V-Vm/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div class="ant-col"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"></div><div style="margin-left:4px;display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout site-layout" style="margin-top:64px"><section class="ant-layout site-layout" style="flex-direction:row"><section class="ant-layout site-layout-sidebar" style="flex:0 0 auto;width:calc((100% - 992px) / 2 + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></section><section class="ant-layout side-layout-main" style="max-width:960px;display:initial"><main class="ant-layout-content main-content" role="main" style="padding:0 24px"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-20"><div><h1 id="container"><a aria-hidden="true" class="anchor-heading" href="#container"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Container</h1>
<h1 id="vm-and-containers"><a aria-hidden="true" class="anchor-heading" href="#vm-and-containers"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>VM and containers</h1>
<ul>
<li><strong>what</strong>: a virtualized system is a <strong>mapping</strong> of its interface, and all resources visible through that interface, to the interface and resources of a real system.</li>
<li><strong>why</strong>: 
<ul>
<li>provide a way of relaxing constrains and increasing flexibility</li>
<li>advantages
<ul>
<li>multiple secure environment: system VM provides a sandbox isolates one system environment from others</li>
<li>failure isolation</li>
<li>mixed-os environment: one hardware support multiple OS concurrently</li>
<li>better System Utilization: can be dynamically or statically re-configured for changing needs</li>
</ul>
</li>
<li>properties:
<ul>
<li>isolation: fault, software, performance(done by scheduling)</li>
<li>encapsulation: all VM state could be captured in a file</li>
<li>interposition: all guest actions could be inspect, modify and deny</li>
</ul>
</li>
</ul>
</li>
<li><strong>how</strong>: abstraction. provide a simplified interface to underlying resources. virtualization provides a different interface at the same level of abstraction.
<ul>
<li>hypervisor: a co-designed firmware-software layer,use this layer to manage the virtual machines</li>
<li>full virtualization: provide same function as the underlying physical hardware. Allow unmodified OS to execute on VM</li>
<li>para-virtualization: provide similar function, and modify OS to cooperate with VMM. Get lower overhead and better performance.</li>
<li>Emulation: implement same function with different intereface and functionality</li>
<li>system VM: vmare, process VM: jvm</li>
<li>multiprocessor system: partition(subset of the resources)-> in space(physical), in time(logical)</li>
<li>in DS:
<ul>
<li>abstract environment from resources</li>
<li>abstract application from environment</li>
<li>different environment no affect users</li>
<li>migration</li>
<li>scaling</li>
<li>protection</li>
<li>sharing</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="containers"><a aria-hidden="true" class="anchor-heading" href="#containers"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Containers</h2>
<ul>
<li>share part of OS</li>
<li>provide independent</li>
<li>resource share.  secure problem</li>
<li>less isolation</li>
</ul>
<h1 id="tupperware"><a aria-hidden="true" class="anchor-heading" href="#tupperware"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Tupperware</h1>
<p><img src="/assets/images/2021-05-10-22-59-20.png"></p>
<p><img src="/assets/images/2021-05-10-23-00-53.png"></p>
<p>resource broker for source of truth for machine info. One instance of Resource Broker (RB) is deployed to each DC. RB records whether a machine in the DC is free or assigned to an entitlement</p>
<p><img src="/assets/images/2021-05-10-23-06-16.png"></p>
<p><img src="/assets/images/2021-05-11-20-32-16.png"></p>
<p>Figure 4 shows an overview of Twine. The Capacity Portal allows users to request or modify entitlements, which associate capacity quotas with business units deﬁned in the service accounting hierarchy. With a granted entitlement, a user deploys jobs through the front end. The scheduler manages job and task lifecycle, e.g., orchestrating a job’s software release. If a job has a TaskController, the scheduler coordinates with the TaskController to make decisions, e.g., delaying a task restart to rebuild a lost data replica ﬁrst. The allocator assigns machines to entitlements and assigns tasks to machines. ReBalancer runs asynchronously and continuously to improve the allocator’s decisions, e.g., better balancing the utilization of CPU, power, and network. Resource Broker (RB) stores machine information and unavailability events that track hardware failures and planned maintenance. DC operators schedule planned maintenance through Ops Planner. The Health Check Service (HCS) monitors machines and updates their status in RB. The agent runs on every machine to manage tasks. Sidekick switches host proﬁles as needed. Service Resource Manager (SRM) autoscales jobs in response to load changes. Conveyor is our continuous delivery system.</p>
<p><a href="https://www.usenix.org/system/files/osdi20-tang.pdf">reference</a></p></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-4"><div><div class=""><div class="ant-anchor-wrapper" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#vm-and-containers" title="Vm And Containers">Vm And Containers</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#containers" title="Containers">Containers</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#tupperware" title="Tupperware">Tupperware</a></div></div></div></div></div></div></div></div></div></main><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></section></section></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"aca8c893-60f8-465f-bda5-31b9ae83d81a","title":"Container","vault":{"fsPath":"repos/dendron-aws-vault","remote":{"type":"git","url":"https://github.com/cczhong11/my_note.git"},"name":"my_note"},"type":"note","desc":"","links":[],"anchors":{"vm-and-containers":{"type":"header","value":"vm-and-containers","line":9,"column":0},"containers":{"type":"header","value":"containers","line":39,"column":0},"tupperware":{"type":"header","value":"tupperware","line":47,"column":0}},"fname":"development.system.compute.container","updated":1620791211494,"created":1618287567586,"parent":"29d090f8-75e0-4755-911f-d09996ce472c","children":[],"data":{},"custom":{},"contentHash":"a407420fd772e3625a9cf41d64363984"},"body":"\u003ch1 id=\"container\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#container\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eContainer\u003c/h1\u003e\n\u003ch1 id=\"vm-and-containers\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#vm-and-containers\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eVM and containers\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ewhat\u003c/strong\u003e: a virtualized system is a \u003cstrong\u003emapping\u003c/strong\u003e of its interface, and all resources visible through that interface, to the interface and resources of a real system.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ewhy\u003c/strong\u003e: \n\u003cul\u003e\n\u003cli\u003eprovide a way of relaxing constrains and increasing flexibility\u003c/li\u003e\n\u003cli\u003eadvantages\n\u003cul\u003e\n\u003cli\u003emultiple secure environment: system VM provides a sandbox isolates one system environment from others\u003c/li\u003e\n\u003cli\u003efailure isolation\u003c/li\u003e\n\u003cli\u003emixed-os environment: one hardware support multiple OS concurrently\u003c/li\u003e\n\u003cli\u003ebetter System Utilization: can be dynamically or statically re-configured for changing needs\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eproperties:\n\u003cul\u003e\n\u003cli\u003eisolation: fault, software, performance(done by scheduling)\u003c/li\u003e\n\u003cli\u003eencapsulation: all VM state could be captured in a file\u003c/li\u003e\n\u003cli\u003einterposition: all guest actions could be inspect, modify and deny\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ehow\u003c/strong\u003e: abstraction. provide a simplified interface to underlying resources. virtualization provides a different interface at the same level of abstraction.\n\u003cul\u003e\n\u003cli\u003ehypervisor: a co-designed firmware-software layer,use this layer to manage the virtual machines\u003c/li\u003e\n\u003cli\u003efull virtualization: provide same function as the underlying physical hardware. Allow unmodified OS to execute on VM\u003c/li\u003e\n\u003cli\u003epara-virtualization: provide similar function, and modify OS to cooperate with VMM. Get lower overhead and better performance.\u003c/li\u003e\n\u003cli\u003eEmulation: implement same function with different intereface and functionality\u003c/li\u003e\n\u003cli\u003esystem VM: vmare, process VM: jvm\u003c/li\u003e\n\u003cli\u003emultiprocessor system: partition(subset of the resources)-\u003e in space(physical), in time(logical)\u003c/li\u003e\n\u003cli\u003ein DS:\n\u003cul\u003e\n\u003cli\u003eabstract environment from resources\u003c/li\u003e\n\u003cli\u003eabstract application from environment\u003c/li\u003e\n\u003cli\u003edifferent environment no affect users\u003c/li\u003e\n\u003cli\u003emigration\u003c/li\u003e\n\u003cli\u003escaling\u003c/li\u003e\n\u003cli\u003eprotection\u003c/li\u003e\n\u003cli\u003esharing\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"containers\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#containers\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eContainers\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eshare part of OS\u003c/li\u003e\n\u003cli\u003eprovide independent\u003c/li\u003e\n\u003cli\u003eresource share.  secure problem\u003c/li\u003e\n\u003cli\u003eless isolation\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"tupperware\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#tupperware\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eTupperware\u003c/h1\u003e\n\u003cp\u003e\u003cimg src=\"/assets/images/2021-05-10-22-59-20.png\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/images/2021-05-10-23-00-53.png\"\u003e\u003c/p\u003e\n\u003cp\u003eresource broker for source of truth for machine info. One instance of Resource Broker (RB) is deployed to each DC. RB records whether a machine in the DC is free or assigned to an entitlement\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/images/2021-05-10-23-06-16.png\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/images/2021-05-11-20-32-16.png\"\u003e\u003c/p\u003e\n\u003cp\u003eFigure 4 shows an overview of Twine. The Capacity Portal allows users to request or modify entitlements, which associate capacity quotas with business units deﬁned in the service accounting hierarchy. With a granted entitlement, a user deploys jobs through the front end. The scheduler manages job and task lifecycle, e.g., orchestrating a job’s software release. If a job has a TaskController, the scheduler coordinates with the TaskController to make decisions, e.g., delaying a task restart to rebuild a lost data replica ﬁrst. The allocator assigns machines to entitlements and assigns tasks to machines. ReBalancer runs asynchronously and continuously to improve the allocator’s decisions, e.g., better balancing the utilization of CPU, power, and network. Resource Broker (RB) stores machine information and unavailability events that track hardware failures and planned maintenance. DC operators schedule planned maintenance through Ops Planner. The Health Check Service (HCS) monitors machines and updates their status in RB. The agent runs on every machine to manage tasks. Sidekick switches host proﬁles as needed. Service Resource Manager (SRM) autoscales jobs in response to load changes. Conveyor is our continuous delivery system.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.usenix.org/system/files/osdi20-tang.pdf\"\u003ereference\u003c/a\u003e\u003c/p\u003e","noteIndex":{"id":"0f1b48c7-3a25-4016-83a5-15864d7803ad","title":"Development","vault":{"fsPath":"repos/dendron-aws-vault","remote":{"type":"git","url":"https://github.com/cczhong11/my_note.git"},"name":"my_note"},"type":"note","desc":"","links":[{"from":{"fname":"root","vaultName":"my_note"},"type":"backlink","position":{"start":{"line":8,"column":3,"offset":63},"end":{"line":8,"column":21,"offset":81},"indent":[]},"value":"development"}],"anchors":{},"fname":"development","updated":1618381238346,"created":1612940782409,"parent":null,"children":["400115e9-30f7-4a13-9776-db059bc9cd42","xsX5v3ZsyJ0i6gf9","1bc3b45a-b6f4-4150-87d3-5bd5b6eb8c24","6cea4852-6e7c-4140-b476-85c07b48a642","a40ef849-d301-4d74-a778-e6d9469dfb5d","09d9081f-3dff-453d-8488-7d2344cc8895","92917ea3-452e-48dc-875e-5cd0002041db","2e151826-cb22-4d89-8ce0-71dad7204ce8","baa39444-0da9-4c55-8df7-2a6f8f787fa4","62daf50d-a39e-463f-aabd-be53790281fd","3524d0a7-be73-45d6-847e-c970f5c1c760","eac0f243-05b3-4b95-bec3-848e33edbc40"],"data":{},"custom":{"nav_order":0,"permalink":"/"},"body":"\n","contentHash":"38357962f5a50c6fd7d318dfa66bea90"},"collectionChildren":null,"customHeadContent":null,"config":{"version":4,"useFMTitle":true,"useNoteTitleForLink":true,"mermaid":true,"useKatex":true,"dev":{"previewV2Enabled":false,"enablePreviewV2":true},"site":{"copyAssets":true,"siteHierarchies":["development","life"],"siteRootDir":"docs","usePrettyRefs":true,"title":"my_note","siteUrl":"https://notes.tczhong.com","description":"Personal knowledge space","siteLastModified":true,"gh_edit_branch":"main","usePrettyLinks":true,"siteNotesDir":"notes","siteFaviconPath":"favicon.ico","gh_edit_link":true,"gh_edit_link_text":"Edit this page on GitHub","gh_root":"docs/","gh_edit_view_mode":"edit","writeStubs":true,"siteIndex":"development"},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{}},"workspace":{"dendronVersion":"0.70.0","vaults":[{"fsPath":"repos/dendron-aws-vault","remote":{"type":"git","url":"https://github.com/cczhong11/my_note.git"},"name":"my_note"},{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableUserTags":true,"enableHashTags":true,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"}},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"aca8c893-60f8-465f-bda5-31b9ae83d81a"},"buildId":"FWMOU7HnIEvYhYu7_V-Vm","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
  
  <title>Linker - my_note</title>
  

  <link
    rel="shortcut icon"
    href="https://notes.tczhong.com/favicon.ico"
    type="image/x-icon"
  />
  <link
    rel="stylesheet"
    href="https://notes.tczhong.com/assets/css/just-the-docs-default.css"
  />
  <script
    type="text/javascript"
    src="https://notes.tczhong.com/assets/js/just-the-docs.js"
  ></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/themes/prism.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
    integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X"
    crossorigin="anonymous"
  />
  <script
    type="text/javascript"
    src="https://notes.tczhong.com/assets/js/vendor/lunr.min.js"
  ></script>
  
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   
  
<meta name="description" content="Personal knowledge space">
<meta name="author" content="">

<link rel="canonical" href="https://notes.tczhong.com/notes/33034e40-d30a-4302-8664-34ad2eeafc96.html">

<meta property="og:type" content="article">
<meta property="og:url" content="https://notes.tczhong.com/notes/33034e40-d30a-4302-8664-34ad2eeafc96.html">
<meta property="og:description" content="Personal knowledge space">
<meta property="og:image" content="https://notes.tczhong.comundefined">

<meta name="twitter:card" content="summary">

<meta name="twitter:url" content="https://notes.tczhong.com/notes/33034e40-d30a-4302-8664-34ad2eeafc96.html">
<meta name="twitter:description" content="Personal knowledge space">
<meta name="twitter:image" content="https://notes.tczhong.comundefined">


  <meta property="og:title" content="Linker - my_note" />
  <meta name="twitter:title" content="Linker - my_note" />
  
</head>


<body>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <symbol id="svg-link" viewBox="0 0 24 24">
        <title>Link</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
          <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
      </symbol>
      <symbol id="svg-search" viewBox="0 0 24 24">
        <title>Search</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
          <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
      </symbol>
      <symbol id="svg-menu" viewBox="0 0 24 24">
        <title>Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
          <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </symbol>
      <symbol id="svg-arrow-right" viewBox="0 0 24 24">
        <title>Expand</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </symbol>
      <symbol id="svg-doc" viewBox="0 0 24 24">
        <title>Document</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
          <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
        </svg>
      </symbol>
    </svg>

    <div class="side-bar">
      <div class="site-header">
        <a href="https://notes.tczhong.com" class="site-title lh-tight">
  my_note

 </a>
        <a href="#" id="menu-button" class="site-button">
          <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
        </a>
      </div>

      <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      </nav>
      <footer class="site-footer">
        ğŸŒ± with ğŸ’• using <a href="https://www.dendron.so/"> Dendron ğŸŒ² </a>
      </footer>
    </div>
    <div class="main" id="top">
        <div id="main-header" class="main-header">
          
            <div class="search">
              <div class="search-input-wrap">
                <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search my_note" aria-label="Search my_note" autocomplete="off">
                <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
              </div>
              <div id="search-results" class="search-results"></div>
            </div>
          
          
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      
        
          <nav aria-label="Breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="https://notes.tczhong.com">Development</a></li><li class="breadcrumb-nav-list-item"><a href="https://notes.tczhong.com/notes/6cea4852-6e7c-4140-b476-85c07b48a642.html">Computer</a></li><li class="breadcrumb-nav-list-item"><a href="https://notes.tczhong.com/notes/15ab8fe9-b553-40f5-906e-b7ae4b548ad8.html">Program</a></li><li class="breadcrumb-nav-list-item">Linker</li></ol>
          </nav>
        
      
      <div id="main-content" class="main-content" role="main">

        
        

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

        

        <script>
          $(function () {
            $('[data-toggle="popover"]').popover({html: true})
          })
        </script>

        

<div id="main" role="main">

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Linker">
    
    <meta itemprop="datePublished" content="2021-04-21T21:56:58+00:00">
    <meta itemprop="dateModified" content="2021-04-21T22:18:27+00:00">

    <div class="page__inner-wrap">

      

      <section class="page__content" itemprop="text">

        

        <h1 id="linker"><a aria-hidden="true" class="anchor-heading" href="#linker"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Linker</h1>
<h1 id="ä¸»è¦åŠŸèƒ½"><a aria-hidden="true" class="anchor-heading" href="#ä¸»è¦åŠŸèƒ½"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>ä¸»è¦åŠŸèƒ½</h1>
<ol>
<li>ç¬¦å·è§£æï¼šå°†ç¬¦å·åº”ç”¨å’Œç¬¦å·å®šä¹‰å…³è”èµ·æ¥</li>
<li>é‡å®šä½ï¼šç”Ÿæˆä»åœ°å€0å¼€å§‹çš„ä»£ç å’Œæ•°æ®èŠ‚</li>
</ol>
<h2 id="elf-object-file"><a aria-hidden="true" class="anchor-heading" href="#elf-object-file"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>ELF (object file)</h2>
<p>executable and linkable format</p>
<p><img src="/assets/images/2021-04-21-22-03-08.png"></p>
<p>. text The machine code of the compiled program .</p>
<p>. rodata Read-only data such as the format strings in printf statements, and jump tables for switch statements.</p>
<p>. data Initialized global and static C variables. Local C variables are maintained at run time on the stack and do not appear in either the .data or .bss sections.</p>
<p>. bss Uninitialized global and static C variables, along with any global or static variables that are initialized to zero. This section occupies no actual space in the pbject file; it is merely a placeholder.</p>
<p>. symtab A symbol table with information about functions and global variables that are defined and referenced in the program. </p>
<p>. rel.text â€¢A list of locations in the .text section that will need to be modified <strong>when the linker combines this object file with others</strong>. In general, any instruction that calls an external function or references a global variable will need to be modified. On the other hand, instructions that call local functions do not need to be modified. Note that relocation information is not needed in executable object files, and is usually omitted unless the user explicitly instructs the linker to include it.</p>
<p>. rel.data Relocation information for any <strong>global variables</strong> that are referenced or defined by the module. In general, any initialized global variable whose initial value is the address of a global variable or externally defined function will need to be modified.</p>
<p>. debug A debugging symbol table with entries for local variables and typedefs defined in the program, global variables defined and referenced in the program, and the original C source file. It is only present if the compiler driver is invoked with the -g option .</p>
<p>. line A mapping between line numbers in the original C source program and machine code instructions in' the . text section. It is only pre~~nt if the ,.compiler driver is invoked with the -g option .</p>
<p>. strtab A string table for the symbol tables in the . symtab and . debug sections and for. the section names in the section headers. A string table is a sequence of null-terminated character strings.</p>
<h2 id="ç¬¦å·å’Œç¬¦å·è¡¨"><a aria-hidden="true" class="anchor-heading" href="#ç¬¦å·å’Œç¬¦å·è¡¨"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>ç¬¦å·å’Œç¬¦å·è¡¨</h2>
<ul>
<li>Global symbols that are defined by module m and that can be referenced by other modules.</li>
<li>Global symbols"that are referenced by module m but defined by some other module.</li>
<li>Local symbols that are defined and referenced exclusively by module m.</li>
</ul>
<p>åœ¨ç¬¦å·è§£ææ—¶ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ï¼Œè®¤ä¸ºè¿™ä¸ªå‡½æ•°å®šä¹‰åœ¨å…¶ä»–åœ°æ–¹ï¼Œlinkeråœ¨é“¾æ¥æ—¶æ‰¾ä¸åˆ°ä¼šæŠ¥é”™</p>
<p>Rule 1. Multiple strong symbols with the same name are not allowed.</p>
<p>Rule 2. Given a strong symbol and multiple weak symbols with the same name, choose the strong symbol.</p>
<p>Rule 3. Given multiple weak symbols with the same name, choose any of the weak symbols.</p>
<h2 id="é™æ€åº“"><a aria-hidden="true" class="anchor-heading" href="#é™æ€åº“"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>é™æ€åº“</h2>
<p>ç›¸å…³å‡½æ•°ç¼–è¯‘ä¸ºç‹¬ç«‹çš„ç›®æ ‡æ¨¡å—ï¼Œå°è£…æˆå•ç‹¬çš„é™æ€åº“æ–‡ä»¶ã€‚linkerå€¼å¤åˆ¶è¢«ç¨‹åºå¼•ç”¨çš„ç›®æ ‡æ¨¡å—ï¼Œå‡å°‘äº†å¯æ‰§è¡Œæ–‡ä»¶åœ¨ç£ç›˜å’Œå†…å­˜ä¸­çš„å¤§å°ã€‚</p>
<p><em>.a å­˜æ¡£æ–‡ä»¶ -> </em>.o åªæœ‰ç›¸å…³çš„å‡½æ•°</p>
<p><img src="/assets/images/2021-04-21-22-09-54.png"></p>
<h2 id="åŠ¨æ€åº“"><a aria-hidden="true" class="anchor-heading" href="#åŠ¨æ€åº“"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>åŠ¨æ€åº“</h2>
<p>ç›®æ ‡æ¨¡å—åœ¨è¿è¡Œæˆ–åŠ è½½æ—¶ï¼Œå¯ä»¥åŠ è½½åˆ°ä»»æ„å†…å­˜åœ°å€ã€‚åœ¨é™æ€é“¾æ¥æ—¶éœ€è¦åŠ è½½ä¸€äº›symbol table</p>
<p><img src="/assets/images/2021-04-21-22-11-14.png"></p>
<h2 id="é‡å®šä½"><a aria-hidden="true" class="anchor-heading" href="#é‡å®šä½"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>é‡å®šä½</h2>
<ul>
<li>åˆå¹¶èŠ‚å’Œç¬¦å·å®šä¹‰</li>
<li>é‡å®šä½ç¬¦å·å¼•ç”¨</li>
</ul>
<h2 id="executable-file"><a aria-hidden="true" class="anchor-heading" href="#executable-file"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>executable file</h2>
<p><img src="/assets/images/2021-04-21-22-12-36.png"></p>
<p><img src="/assets/images/2021-04-21-22-12-54.png"></p>
<p>Each' program in a Linux , system runs in the context of a process with its own virtual address space. When the shell runs a program, the parent shell process forks a child process that is a duplicate of the parent. The child process invokes the loader via the execve system call. The loader deletes the child's existing virtual memory segments and creates a neW set of code, data, heap, and stack segments, The new stack and heap segments are initialized to zero. The new code and data segments are initialized to the contents of the executable file by mapping pages in the virtual address space to page-size chunks of the executable file. Finally, the loader jumps to the start address, which eventually calls the application's main routine. Aside from some header information, there is no copying of data from disk to memory during loading. The copying is deferred until the CPU referencb a mapped virtual page, at which point the operating system automatically transfers the page from disk to memory using its paging mechanism.</p><span id="navId" data="33034e40-d30a-4302-8664-34ad2eeafc96"></span>

                
      </section>

      
    </div>

    
  </article>

  
  
</div>


        
          <hr>
          <footer>
            
            

            
                
              </div>
          </footer>
        
    </div>
</div>


  

  <div class="search-overlay"></div>

</div>
</body>
</html>

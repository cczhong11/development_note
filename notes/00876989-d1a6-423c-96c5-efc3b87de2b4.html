<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
  
  <title>Distributed_system - my_note</title>
  

  <link
    rel="shortcut icon"
    href="https://notes.tczhong.com/favicon.ico"
    type="image/x-icon"
  />
  <link
    rel="stylesheet"
    href="https://notes.tczhong.com/assets/css/just-the-docs-default.css"
  />
  <script
    type="text/javascript"
    src="https://notes.tczhong.com/assets/js/just-the-docs.js"
  ></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/themes/prism.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
    integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X"
    crossorigin="anonymous"
  />
  <script
    type="text/javascript"
    src="https://notes.tczhong.com/assets/js/vendor/lunr.min.js"
  ></script>
  
  <meta name="viewport" content="width=device-width, initial-scale=1" />
   
  
<meta name="description" content="Personal knowledge space">
<meta name="author" content="">

<link rel="canonical" href="https://notes.tczhong.com/notes/00876989-d1a6-423c-96c5-efc3b87de2b4.html">

<meta property="og:type" content="article">
<meta property="og:url" content="https://notes.tczhong.com/notes/00876989-d1a6-423c-96c5-efc3b87de2b4.html">
<meta property="og:description" content="Personal knowledge space">
<meta property="og:image" content="https://notes.tczhong.comundefined">

<meta name="twitter:card" content="summary">

<meta name="twitter:url" content="https://notes.tczhong.com/notes/00876989-d1a6-423c-96c5-efc3b87de2b4.html">
<meta name="twitter:description" content="Personal knowledge space">
<meta name="twitter:image" content="https://notes.tczhong.comundefined">


  <meta property="og:title" content="Distributed_system - my_note" />
  <meta name="twitter:title" content="Distributed_system - my_note" />
  
</head>


<body>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <symbol id="svg-link" viewBox="0 0 24 24">
        <title>Link</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
          <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
      </symbol>
      <symbol id="svg-search" viewBox="0 0 24 24">
        <title>Search</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
          <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
      </symbol>
      <symbol id="svg-menu" viewBox="0 0 24 24">
        <title>Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
          <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </symbol>
      <symbol id="svg-arrow-right" viewBox="0 0 24 24">
        <title>Expand</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </symbol>
      <symbol id="svg-doc" viewBox="0 0 24 24">
        <title>Document</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
          <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
        </svg>
      </symbol>
    </svg>

    <div class="side-bar">
      <div class="site-header">
        <a href="https://notes.tczhong.com" class="site-title lh-tight">
  my_note

 </a>
        <a href="#" id="menu-button" class="site-button">
          <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
        </a>
      </div>

      <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      </nav>
      <footer class="site-footer">
        🌱 with 💕 using <a href="https://www.dendron.so/"> Dendron 🌲 </a>
      </footer>
    </div>
    <div class="main" id="top">
        <div id="main-header" class="main-header">
          
            <div class="search">
              <div class="search-input-wrap">
                <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search my_note" aria-label="Search my_note" autocomplete="off">
                <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
              </div>
              <div id="search-results" class="search-results"></div>
            </div>
          
          
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      
        
          <nav aria-label="Breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="https://notes.tczhong.com">Development</a></li><li class="breadcrumb-nav-list-item"><a href="https://notes.tczhong.com/notes/a40ef849-d301-4d74-a778-e6d9469dfb5d.html">Database</a></li><li class="breadcrumb-nav-list-item">Distributed_system</li></ol>
          </nav>
        
      
      <div id="main-content" class="main-content" role="main">

        
        

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

        

        <script>
          $(function () {
            $('[data-toggle="popover"]').popover({html: true})
          })
        </script>

        

<div id="main" role="main">

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Distributed_system">
    
    <meta itemprop="datePublished" content="2021-04-12T19:55:50+00:00">
    <meta itemprop="dateModified" content="2021-04-12T19:56:21+00:00">

    <div class="page__inner-wrap">

      

      <section class="page__content" itemprop="text">

        

        <h1 id="distributed_system"><a aria-hidden="true" class="anchor-heading" href="#distributed_system"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Distributed_system</h1>
<h2 id="多个server的concurrency解决思路"><a aria-hidden="true" class="anchor-heading" href="#多个server的concurrency解决思路"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>多个server的concurrency解决思路</h2>
<h3 id="centralized-approach-中央集权"><a aria-hidden="true" class="anchor-heading" href="#centralized-approach-中央集权"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Centralized Approach 中央集权</h3>
<ul>
<li>what: 直接指派一个作为中央</li>
<li>why:easy and gurante</li>
<li>how: 3 messeages per cs entry : (request, permission, done)</li>
<li>problem: central dies and threads dies in the cs</li>
</ul>
<h3 id="lamport-timestamp"><a aria-hidden="true" class="anchor-heading" href="#lamport-timestamp"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>lamport timestamp</h3>
<ul>
<li>what: global pripority queue for cs. send to each node request</li>
<li>why:  every node know what happens.</li>
<li>how: 3(N-1) messeages per requests (request,reply,release)</li>
<li>problem: no falut tolerant. message may not arrive in time, especially when sending requst</li>
</ul>
<h3 id="ricarti-and-agrawala-timestamp-approach"><a aria-hidden="true" class="anchor-heading" href="#ricarti-and-agrawala-timestamp-approach"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Ricarti and Agrawala timestamp approach</h3>
<ul>
<li>what: combine reply and release. change global queue to voting.</li>
<li>why: reduce message number</li>
<li>how: send request to others and if other agree(not in CS, or in cs and exit will reply) will reply. Get enough vote can start. 2*(n-1) messages.</li>
<li>problem: workhorses. too much messages. Even a single failure can disable the entire system. Both timestamp approaches require more messages than a centralized approach -- and have lower fault tolerance. The centralized approach provides one single point of failure (SPF). These timestamp approaches have N SPFs.</li>
</ul>
<h3 id="voting"><a aria-hidden="true" class="anchor-heading" href="#voting"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Voting</h3>
<ul>
<li>what: send request to others, if other have voted, put it in queue. When one exit cs, it send release to others and other could handle request in the queue.</li>
<li>why: only majority agree is ok. change the way of message and queue. </li>
<li>how: break ties could use <strong>lamport time</strong>. break deadlock when no one win, use inqure message, and other could vote again.It sends an INQUIRE message to the candidate for who it voted. If this candidate won the election, it can just ignore the INQUIRE and RELEASE normally when done. But, if it hasn't yet entered the critical section, it gives back the vote and signals this by sending back a RELINQUISH. Upon receipt of the RELINQUISH, the voter is free to vote for the preceding request.</li>
<li>problem: less message. (3+x)(1/2 N+?) request, vote, release</li>
</ul>
<h3 id="voting-districts"><a aria-hidden="true" class="anchor-heading" href="#voting-districts"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>voting districts</h3>
<ul>
<li>what: send message to districts, just in the same line and cloumn. </li>
<li>why: reduce message</li>
<li>how: same voting techniques. 3*(2sqrt(N)-1)</li>
<li>problem: not falut tolerant, no deadlock. one server die may change.选择多个进入cs</li>
</ul>
<h3 id="token-ring"><a aria-hidden="true" class="anchor-heading" href="#token-ring"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>token ring</h3>
<ul>
<li>what: everyone know successor, and move token one by one. hold it until done cs</li>
<li>why: fault tolerance. good at high contention</li>
<li>how: if one dies with token, last one see time out and generate a new one. Under high contention, message low. Every one has limited time with token.</li>
<li>problem: not good at low contention. </li>
</ul>
<h3 id="raymonds-algorithm"><a aria-hidden="true" class="anchor-heading" href="#raymonds-algorithm"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>raymond's algorithm</h3>
<ul>
<li>what: use tree to pass token ring. </li>
<li>why: more quick in low contention</li>
<li>how: pass by node.</li>
<li>problem: worst case, travel long</li>
</ul>
<h3 id="path-compression"><a aria-hidden="true" class="anchor-heading" href="#path-compression"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>path compression</h3>
<ul>
<li>what: allow short cut to pass token ring</li>
<li>why: current_dir may out-of-date, when request happened, node can get into current_dir end and enqueue in <strong>next</strong> queue. </li>
<li>how: use a queue of pending request with current_dir and next. current_dir point to next waiting, next is current(with token) point to waiting.</li>
</ul>
<hr>
<h2 id="children"><a aria-hidden="true" class="anchor-heading" href="#children"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Children</h2>
<ol>
<li><a href="https://notes.tczhong.com/notes/1f47041a-df34-437a-9e59-c4ed0fd44232.html">Filesystem</a></li>
<li><a href="https://notes.tczhong.com/notes/3bab31a7-f26c-4fa5-9f2d-cc9f851f5b38.html">Voting</a></li>
</ol><span id="navId" data="00876989-d1a6-423c-96c5-efc3b87de2b4"></span>

                
      </section>

      
    </div>

    
  </article>

  
  
</div>


        
          <hr>
          <footer>
            
            

            
                
              </div>
          </footer>
        
    </div>
</div>


  

  <div class="search-overlay"></div>

</div>
</body>
</html>

{"pageProps":{"note":{"id":"09956453-4cbd-4f15-a4bd-b1f6c84449a4","title":"File_system","vault":{"fsPath":"repos/dendron-aws-vault","remote":{"type":"git","url":"https://github.com/cczhong11/my_note.git"},"name":"my_note"},"type":"note","desc":"","links":[{"type":"wiki","from":{"fname":"development.system.file_system","id":"09956453-4cbd-4f15-a4bd-b1f6c84449a4","vaultName":"my_note"},"value":"development.computer.io","alias":"Io","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":49,"offset":49},"indent":[]},"xvault":true,"to":{"fname":"development.computer.io","vaultName":"my_note"}}],"anchors":{"file-system":{"type":"header","value":"file-system","line":14,"column":0},"inode":{"type":"header","value":"inode","line":26,"column":0},"structure-of-a-regular-file":{"type":"header","value":"structure-of-a-regular-file","line":39,"column":0},"directories":{"type":"header","value":"directories","line":49,"column":0},"ls":{"type":"header","value":"ls","line":55,"column":0},"conversion-of-a-path-name-to-an-innode":{"type":"header","value":"conversion-of-a-path-name-to-an-innode","line":70,"column":0}},"fname":"development.system.file_system","updated":1620791771392,"created":1620080210690,"parent":"62daf50d-a39e-463f-aabd-be53790281fd","children":[],"data":{},"custom":{},"contentHash":"2fd595333427c87ebf577744860fc75e"},"body":"<h1 id=\"file_system\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#file_system\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>File_system</h1>\n<p><a href=\"/notes/b1e1dad4-5179-4629-af74-208cef96a55e\">Io</a></p>\n<p>the in-memory data structure vnode is just an inode cache that stores information about the file(typically inode stores in the disk) so that it can be accessed more quickly.</p>\n<p><img src=\"/assets/images/2021-05-11-19-41-30.png\"></p>\n<h1 id=\"file-system\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#file-system\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>file system</h1>\n<p><img src=\"/assets/images/2021-05-11-19-43-14.png\"></p>\n<ul>\n<li>\n<p>The boot block occupies the beginning of a file system, typically the first sector, and may contain the bootstrap code that is read into the machine to boot, or initialize, the operating system. Although only one boot block is needed to boot the system, every file system has a (possibly empty) boot block.</p>\n</li>\n<li>\n<p>The super block describes the state of a file system â€” how large it is, how many files it can store, where to find free space on the file system, and other information.</p>\n</li>\n<li>\n<p>The mode list is a list of Modes that follows the super block in the file system. Administrators specify the size of the Mode list when configuring a file system. The kernel references Modes by index into the Mode list. One Mode is the root mode of the file system: it is the Mode by which the directory structure of the file system is accessible after execution of the mount system call (Section 5.14).</p>\n</li>\n<li>\n<p>The data blocks start at the end of the Mode list and contain file data and administrative data. An allocated data block can belong to one and only one file in the file system.</p>\n</li>\n</ul>\n<h2 id=\"inode\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#inode\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>inode</h2>\n<p>Modes exist in a static form on disk, and the kernel reads them into an in-core mode to manipulate them. Disk modes consist of the following fields</p>\n<ul>\n<li>file owner identifier</li>\n<li>file type</li>\n<li>file access permission</li>\n<li>access time, last modified, last accessed</li>\n<li>number of links to the file</li>\n<li>table of contents for the disk addresses of data in a file</li>\n<li>file size</li>\n<li>no path</li>\n</ul>\n<h2 id=\"structure-of-a-regular-file\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#structure-of-a-regular-file\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>STRUCTURE OF A REGULAR FILE</h2>\n<p>the Mode contains the table of contents to locate a file's data on disk. Since each block on a disk is addressable by number, the table of contents consists of a set of disk block numbers.</p>\n<p>For greater flexibility, the kernel allocates file space one block at a time and allows the data in a file to be spread throughout the file system.</p>\n<p>To access the data via the indirect block, the kernel must read the indirect block, find the appropriate direct block entry, and then read the direct block to find the data.</p>\n<p><img src=\"/assets/images/2021-05-11-19-58-08.png\"></p>\n<h2 id=\"directories\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#directories\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>directories</h2>\n<p>A directory is a file whose data is a sequence of entries, each consisting of an mode number and the name of a file contained in the directory.</p>\n<p><img src=\"/assets/images/2021-05-11-20-05-57.png\"></p>\n<h2 id=\"ls\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#ls\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>ls</h2>\n<pre><code>-rwxrw-r--    10    root   root 2048    Jan 13 07:11 afile.exe\n?UUUGGGOOOS   00  UUUUUU GGGGGG ####    ^-- date stamp and file name are obvious ;-)\n^ ^  ^  ^ ^    ^      ^      ^    ^\n| |  |  | |    |      |      |    \\--- File Size\n| |  |  | |    |      |      \\-------- Group Name (for example, Users, Administrators, etc)\n| |  |  | |    |      \\--------------- Owner Acct\n| |  |  | |    \\---------------------- Link count (what constitutes a \"link\" here varies)\n| |  |  | \\--------------------------- Alternative Access (blank means none defined, anything else varies)\n| \\--\\--\\----------------------------- Read, Write and Special access modes for [U]ser, [G]roup, and [O]thers (everyone else)\n\\------------------------------------- File type flag\n</code></pre>\n<h2 id=\"conversion-of-a-path-name-to-an-innode\"><a aria-hidden=\"true\" class=\"anchor-heading\" href=\"#conversion-of-a-path-name-to-an-innode\"><svg aria-hidden=\"true\" viewBox=\"0 0 16 16\"><use xlink:href=\"#svg-link\"></use></svg></a>conversion of a path name to an innode</h2>\n<p><img src=\"/assets/images/2021-05-11-20-12-36.png\"></p>\n<p>The kernel does a linear search of the directory file associated with the working mode, trying to match the path name component to a directory entry name.</p>","noteIndex":{"id":"0f1b48c7-3a25-4016-83a5-15864d7803ad","title":"Development","vault":{"fsPath":"repos/dendron-aws-vault","remote":{"type":"git","url":"https://github.com/cczhong11/my_note.git"},"name":"my_note"},"type":"note","desc":"","links":[{"from":{"fname":"root","vaultName":"my_note"},"type":"backlink","position":{"start":{"line":8,"column":3,"offset":63},"end":{"line":8,"column":21,"offset":81},"indent":[]},"value":"development"}],"anchors":{},"fname":"development","updated":1618381238346,"created":1612940782409,"parent":null,"children":["400115e9-30f7-4a13-9776-db059bc9cd42","xsX5v3ZsyJ0i6gf9","1bc3b45a-b6f4-4150-87d3-5bd5b6eb8c24","6cea4852-6e7c-4140-b476-85c07b48a642","a40ef849-d301-4d74-a778-e6d9469dfb5d","09d9081f-3dff-453d-8488-7d2344cc8895","92917ea3-452e-48dc-875e-5cd0002041db","2e151826-cb22-4d89-8ce0-71dad7204ce8","baa39444-0da9-4c55-8df7-2a6f8f787fa4","62daf50d-a39e-463f-aabd-be53790281fd","3524d0a7-be73-45d6-847e-c970f5c1c760","eac0f243-05b3-4b95-bec3-848e33edbc40"],"data":{},"custom":{"nav_order":0,"permalink":"/"},"body":"\n","contentHash":"38357962f5a50c6fd7d318dfa66bea90"},"collectionChildren":null,"customHeadContent":null,"config":{"version":4,"useFMTitle":true,"useNoteTitleForLink":true,"mermaid":true,"useKatex":true,"dev":{"previewV2Enabled":false,"enablePreviewV2":true},"site":{"copyAssets":true,"siteHierarchies":["development","life"],"siteRootDir":"docs","usePrettyRefs":true,"title":"my_note","siteUrl":"https://notes.tczhong.com","description":"Personal knowledge space","siteLastModified":true,"gh_edit_branch":"main","usePrettyLinks":true,"siteNotesDir":"notes","siteFaviconPath":"favicon.ico","gh_edit_link":true,"gh_edit_link_text":"Edit this page on GitHub","gh_root":"docs/","gh_edit_view_mode":"edit","writeStubs":true,"siteIndex":"development"},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false,"bubbleUpCreateNew":true}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{}},"workspace":{"dendronVersion":"0.70.0","vaults":[{"fsPath":"repos/dendron-aws-vault","remote":{"type":"git","url":"https://github.com/cczhong11/my_note.git"},"name":"my_note"},{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableUserTags":true,"enableHashTags":true,"task":{"name":"","dateFormat":"","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"}},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableMermaid":true,"enablePrettyRefs":true,"enableKatex":true}}},"__N_SSG":true}